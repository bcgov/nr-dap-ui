<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Data Table Management</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <%- include('../partials/header', { title: 'Data Table Management' }) %>
    <h1><% if (isAdmin) { %>All Data Tables<% } else { %>Your Data Tables<% } %></h1>
    <table>
        <thead>
            <tr>
                <th>Application Name</th>
                <th>Table Names</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            <% if (applications.length > 0) { %>
                <% applications.forEach(app => { %>
                    <tr>
                        <td><%= app.applicationname %></td>
                        <td><%= app.tablenames.join(", ") %></td>
                        <td>
                            <form method="post" action="/table/delete/<%= app.applicationname %>" onsubmit="return confirm('Are you sure you want to delete this application and all its tables?');">
                                <button type="submit" class="button-del">Delete All</button>
                            </form>
                        </td>
                    </tr>
                <% }) %>
            <% } else { %>
                <tr>
                    <td colspan="3">No data available.</td>
                </tr>
            <% } %>
        </tbody>
    </table>
    <%- include('../partials/footer') %>
</body>
</html>
